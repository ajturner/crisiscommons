0.5.0 - in progress
-----
* Locations have been added!
  Locations require an import of data files from Geonames (geonames.org).
  By default, a smaller data set will be imported, consisting of cities
  with a population greater than 1000 people.

  Locations require a migration and a rake task:
    % rake db:migrate
    % rake cg:import_geo_data

  Please note that the cg:import_geo_data rake task could take a bit of
  time to run and will add a large-ish data set to mysql.

* db migrations (rake db:migrate) are required for this upgrade.
** if you use the moderation module, you need to run this first:
    * script/generate plugin_migration
    * additionally, after the plugin migration file is generated (something like
      *_moderation_to_version_8.rb), the convert_message_page_to_discussion_message
      migration needs to be renamed so that it runs after the moderation migration.
      to do this, simply move the message_page migration to a timestamp later than 
      the moderation migration.

* Features now use Transforms.
  Transforms are a great way to make features more readable.
  However Cucumber 0.4.4 comes with a bug that makes it crash if
  transforms are used and arguments to steps are left empty. We want
  them empty step arguments so please apply the fix from
  http://github.com/robholland/cucumber/commit/59b51c8a2e7ff25eae33ddda559939719c726213
  to your cucumber install.
  Alternatively, the latest version of cucumber fixes this problem.

* Custom Appearances
  Due to the change in the UI, custom appearances will need to be re-done after
  an upgrade. Custom Appearaances are set in the Advanced tab of the Site Appearance
  settings.  The mastehead background color will work as before, but any other 
  changes using this form will not be applicable to 0.5.


0.4.7
-----
* Contains a migration that removes duplicate daily trackings.
  Due to a bug hourlies where counted twice for dailies. This
  migration fixes that. It only removes duplicates for the same
  page and day - so it should be a no-op if there are none.
  If you use trackings differently than on a daily basis you will
  probably not want to run this migration. Just remove it. It does
  not have any effect on the schema.

* Contains a migration that sets the access level of status post
  activities so that they are able to be viewed by friends and
  peers only.  This does nto have any effect on the schema.

To perform these migrations:
    % rake db:migrate RAILS_ENV=xxxx

0.4.6.1
-------

* the following is only necessary if you were running 0.4.6:
    % backup your database!
    % run the rails console: script/console production
    % Wiki.find(:all, :conditions => 'body RLIKE "[\r\n]{20,}"').size
      If it returns a zero, no need to do anything more
    % Wiki.find(:all, :conditions => 'body RLIKE "[\r\n]{20,}"').each
      {|w| w.body.gsub!(/[\n\r]{20,}/, "\n\n\n\n"); w.raw_structure = nil;
      w.save!}
    % repeat the first Wiki.find procedure to make sure you get no results

0.4.6
-----
* if using moderation module, a db migration is required:
    % script/generate plugin_migration
    % rake db:migrate
